CREATE DATABASE IF NOT EXISTS sensors_dashboard;
USE sensors_dashboard;

-- Sensors table: holds general information about counter-type sensors
CREATE TABLE sensors (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    volume_per_hit DECIMAL(10,2) NOT NULL COMMENT 'Volume increment per sensor hit (e.g., 1.5 litres)',
    unit VARCHAR(10) DEFAULT 'L' COMMENT 'Unit of measurement (L, m³, etc.)',
    status ENUM('active', 'inactive') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Readings table: holds individual hits/readings from sensors
CREATE TABLE readings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    sensor_id INT NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (sensor_id) REFERENCES sensors(id) ON DELETE CASCADE,
    INDEX idx_sensor_timestamp (sensor_id, timestamp) COMMENT 'Index for efficient time-based queries'
);


sensors-dashboard/
├── index.php                 # Main dashboard page
├── config/
│   ├── database.php          # Database connection configuration
│   └── config.php            # General app configuration
├── includes/
│   ├── header.php            # Common HTML header
│   ├── footer.php            # Common HTML footer
│   └── functions.php         # Utility functions
├── pages/
│   ├── sensors.php           # Sensors management page
│   ├── readings.php          # Readings view page
│   └── reports.php           # Reports and analytics
├── api/
│   ├── get_sensors.php       # API to fetch sensors data
│   ├── get_readings.php      # API to fetch readings data
│   └── add_reading.php       # API to add new readings
├── assets/
│   ├── css/
│   │   └── style.css         # Main stylesheet
│   ├── js/
│   │   ├── dashboard.js      # Dashboard functionality
│   │   └── charts.js         # Chart.js integration
│   └── images/
├── sql/
│   ├── schema.sql            # Database schema (from your notes.md)
│   ├── sample_data.sql       # Sample sensors data
│   └── sample_readings.sql   # Sample readings data
└── notes.md   



-- Insert readings for 3 days (2 days ago, yesterday, today)
-- Each sensor will have 8-10 readings per day at various times

-- DAY 1: 2 days ago
INSERT INTO readings (sensor_id, timestamp) VALUES
-- Kitchen Tap (sensor 1) - 8 readings
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 7 HOUR + INTERVAL 15 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 8 HOUR + INTERVAL 45 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 12 HOUR + INTERVAL 30 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 14 HOUR + INTERVAL 20 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 17 HOUR + INTERVAL 10 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 19 HOUR + INTERVAL 5 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 20 HOUR + INTERVAL 30 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 22 HOUR + INTERVAL 15 MINUTE),

-- Bathroom Shower (sensor 2) - 6 readings
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 6 HOUR + INTERVAL 30 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 7 HOUR + INTERVAL 45 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 18 HOUR + INTERVAL 15 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 19 HOUR + INTERVAL 30 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 21 HOUR + INTERVAL 45 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 22 HOUR + INTERVAL 30 MINUTE),

-- Garden Sprinkler (sensor 3) - 10 readings
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 6 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 7 HOUR + INTERVAL 30 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 9 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 11 HOUR + INTERVAL 15 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 13 HOUR + INTERVAL 45 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 15 HOUR + INTERVAL 20 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 17 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 18 HOUR + INTERVAL 30 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 20 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 21 HOUR + INTERVAL 15 MINUTE),

-- Laundry Machine (sensor 4) - 9 readings
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 8 HOUR),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 9 HOUR + INTERVAL 30 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 10 HOUR + INTERVAL 15 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 14 HOUR),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 15 HOUR + INTERVAL 45 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 16 HOUR + INTERVAL 30 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 19 HOUR),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 20 HOUR + INTERVAL 45 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 2 DAY) + INTERVAL 22 HOUR);

-- DAY 2: Yesterday
INSERT INTO readings (sensor_id, timestamp) VALUES
-- Kitchen Tap (sensor 1) - 12 readings
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 6 HOUR + INTERVAL 45 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 7 HOUR + INTERVAL 30 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 8 HOUR + INTERVAL 15 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 11 HOUR + INTERVAL 20 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 12 HOUR + INTERVAL 45 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 14 HOUR + INTERVAL 10 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 16 HOUR + INTERVAL 30 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 18 HOUR + INTERVAL 15 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 19 HOUR + INTERVAL 45 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 20 HOUR + INTERVAL 30 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 21 HOUR + INTERVAL 15 MINUTE),
(1, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 23 HOUR),

-- Bathroom Shower (sensor 2) - 7 readings
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 6 HOUR + INTERVAL 15 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 7 HOUR),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 8 HOUR + INTERVAL 30 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 18 HOUR),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 19 HOUR + INTERVAL 15 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 21 HOUR + INTERVAL 30 MINUTE),
(2, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 22 HOUR + INTERVAL 45 MINUTE),

-- Garden Sprinkler (sensor 3) - 8 readings
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 5 HOUR + INTERVAL 30 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 7 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 9 HOUR + INTERVAL 15 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 12 HOUR),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 15 HOUR + INTERVAL 30 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 17 HOUR + INTERVAL 45 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 19 HOUR + INTERVAL 30 MINUTE),
(3, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 21 HOUR),

-- Laundry Machine (sensor 4) - 6 readings
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 9 HOUR),
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 10 HOUR + INTERVAL 45 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 14 HOUR + INTERVAL 30 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 16 HOUR),
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 19 HOUR + INTERVAL 15 MINUTE),
(4, DATE_SUB(NOW(), INTERVAL 1 DAY) + INTERVAL 21 HOUR + INTERVAL 45 MINUTE);

-- DAY 3: Today
INSERT INTO readings (sensor_id, timestamp) VALUES
-- Kitchen Tap (sensor 1) - 9 readings
(1, CURDATE() + INTERVAL 7 HOUR),
(1, CURDATE() + INTERVAL 8 HOUR + INTERVAL 30 MINUTE),
(1, CURDATE() + INTERVAL 11 HOUR + INTERVAL 15 MINUTE),
(1, CURDATE() + INTERVAL 12 HOUR + INTERVAL 45 MINUTE),
(1, CURDATE() + INTERVAL 14 HOUR + INTERVAL 20 MINUTE),
(1, CURDATE() + INTERVAL 17 HOUR + INTERVAL 30 MINUTE),
(1, CURDATE() + INTERVAL 19 HOUR),
(1, CURDATE() + INTERVAL 20 HOUR + INTERVAL 15 MINUTE),
(1, CURDATE() + INTERVAL 22 HOUR),

-- Bathroom Shower (sensor 2) - 8 readings
(2, CURDATE() + INTERVAL 6 HOUR + INTERVAL 30 MINUTE),
(2, CURDATE() + INTERVAL 7 HOUR + INTERVAL 15 MINUTE),
(2, CURDATE() + INTERVAL 8 HOUR),
(2, CURDATE() + INTERVAL 18 HOUR + INTERVAL 30 MINUTE),
(2, CURDATE() + INTERVAL 19 HOUR + INTERVAL 45 MINUTE),
(2, CURDATE() + INTERVAL 21 HOUR),
(2, CURDATE() + INTERVAL 22 HOUR + INTERVAL 30 MINUTE),
(2, CURDATE() + INTERVAL 23 HOUR + INTERVAL 15 MINUTE),

-- Garden Sprinkler (sensor 3) - 11 readings
(3, CURDATE() + INTERVAL 5 HOUR + INTERVAL 45 MINUTE),
(3, CURDATE() + INTERVAL 6 HOUR + INTERVAL 30 MINUTE),
(3, CURDATE() + INTERVAL 8 HOUR + INTERVAL 15 MINUTE),
(3, CURDATE() + INTERVAL 10 HOUR),
(3, CURDATE() + INTERVAL 12 HOUR + INTERVAL 30 MINUTE),
(3, CURDATE() + INTERVAL 14 HOUR + INTERVAL 45 MINUTE),
(3, CURDATE() + INTERVAL 16 HOUR + INTERVAL 15 MINUTE),
(3, CURDATE() + INTERVAL 18 HOUR),
(3, CURDATE() + INTERVAL 19 HOUR + INTERVAL 30 MINUTE),
(3, CURDATE() + INTERVAL 21 HOUR + INTERVAL 15 MINUTE),
(3, CURDATE() + INTERVAL 22 HOUR + INTERVAL 45 MINUTE),

-- Laundry Machine (sensor 4) - 7 readings
(4, CURDATE() + INTERVAL 8 HOUR + INTERVAL 45 MINUTE),
(4, CURDATE() + INTERVAL 10 HOUR + INTERVAL 30 MINUTE),
(4, CURDATE() + INTERVAL 13 HOUR + INTERVAL 15 MINUTE),
(4, CURDATE() + INTERVAL 15 HOUR),
(4, CURDATE() + INTERVAL 17 HOUR + INTERVAL 45 MINUTE),
(4, CURDATE() + INTERVAL 20 HOUR + INTERVAL 30 MINUTE),
(4, CURDATE() + INTERVAL 22 HOUR + INTERVAL 15 MINUTE);